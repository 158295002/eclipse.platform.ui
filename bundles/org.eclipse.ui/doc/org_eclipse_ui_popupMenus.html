<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HEAD><meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
</HEAD>
<HTML>
<BODY>
<H1><CENTER>Pop-up Menus</CENTER></H1>
<b><i>Identifier: </i></b>org.eclipse.ui.popupMenus<p>
<b><i>Description: </i></b>This extension point is used to add new actions to context menus owned by other plug-ins.  Action contribution may be made against a specific object type (<samp>objectContribution</samp>) or against a specific context menu of a view or editor part (<samp>viewerContribution</samp>). When using <samp>objectContribution</samp>, the contribution will appear in all view or editor part context menus where objects of the specified type are selected. In contrast, using <samp>viewerContribution</samp>, the contribution will only appear in the specified view or editor part context menu, regardless of the selection.
<p>
When selection is heterogeneous, contribution will be applied if registered against a common type of the selection, if possible. If a direct match is not possible, matching against superclasses and superinterfaces will be attempted. 
<p>
Selection can be further constrained through the use of a name filter. If used, all the objects in the selection must match the filter in order to apply the contribution. 
<p>
Individual actions in an object contribution can use attribute enablesFor to specify if it should only apply for a single, multiple, or any other selection type. 
<p>
If these filtering mechanisms are inadequate an action contribution may use the <samp>filter</samp> mechanism.  In this case the attributes of the target object are described in a series of name value pairs.  The attributes which apply to the selection are type specific and beyond the domain of the workbench itself, so the workbench will delegate filtering at this level to the actual selection.<p>
<p>
An action's enablement and/or visibility can be defined using the elements <samp>enablement</samp> and <samp>visibility</samp> respectively. These two elements contain a boolean expression that is evaluated to determine the enablement and/or visibility.
<p>
The syntax is the same for the <samp>enablement</samp> and <samp>visibility</samp> elements. Both contain only one boolean expression sub-element. In the simplest case, this will be an <samp>objectClass</samp>, <samp>objectState</samp>, <samp>pluginState</samp>, or <samp>systemProperty</samp> element. In the more complex case, the <samp>and</samp>, <samp>or</samp>, and <samp>not</samp> elements can be combined to form a boolean expression. Both the <samp>and</samp>, and <samp>or</samp> elements must contain 2 sub-elements. The <samp>not</samp> element must contain only 1 sub-element.
</p><p><b><i>Configuration Markup:</i></b><p>
<p><samp>&nbsp;&nbsp; &lt;!ELEMENT extension (objectContribution+ , viewerContribution+)&gt;</samp>
<br><br><samp>&nbsp;&nbsp; &lt;!ATTLIST extension</samp>
<br><samp>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;point&nbsp;CDATA #REQUIRED</samp>
<br><samp>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id&nbsp;&nbsp;&nbsp;&nbsp;CDATA #IMPLIED</samp>
<br><samp>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name&nbsp;&nbsp;CDATA #IMPLIED</samp>
<br><samp>&nbsp;&nbsp; &gt;</samp>
<ul>
<li><b>point</b> - a fully qualified identifier of the target extension point</li><li><b>id</b> - an optional identifier of the extension instance</li><li><b>name</b> - an optional name of the extension instance</li></ul>
<p><samp>&nbsp;&nbsp; &lt;!ELEMENT objectContribution (filter* , visibility? , menu* , action*)&gt;</samp>
<p>&nbsp;&nbsp; This element is used to define a group of actions and/or menus for any viewer context menus for which the objects of the specified type are selected.</p>
<p></p>
<samp>&nbsp;&nbsp; &lt;!ATTLIST objectContribution</samp>
<br><samp>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CDATA #REQUIRED</samp>
<br><samp>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;objectClass&nbsp;CDATA #REQUIRED</samp>
<br><samp>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nameFilter&nbsp;&nbsp;CDATA #IMPLIED</samp>
<br><samp>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;adaptable&nbsp;&nbsp;&nbsp;(true | false) "false""false"</samp>
<br><samp>&nbsp;&nbsp; &gt;</samp>
<ul>
<li><b>id</b> - a unique identifier used to reference this contribution</li><li><b>objectClass</b> - a fully qualified name of the class or interface that all objects in the 
selection must subclass or implement.</li><li><b>nameFilter</b> - an optional wild card filter for the name that can be applied to all objects in the selection. No contribution will take place if there is no match.</li><li><b>adaptable</b> - a flag that indicates if types that adapt to IResource should use this object contribution. This flag is used only if objectClass adapts to IResource.  Default value is false.</li></ul>
<p><samp>&nbsp;&nbsp; &lt;!ELEMENT viewerContribution (visibility? , menu* , action*)&gt;</samp>
<p>&nbsp;&nbsp; This element is used to define a group of actions and/or menus for a specific view or editor part context menu.</p>
<p></p>
<samp>&nbsp;&nbsp; &lt;!ATTLIST viewerContribution</samp>
<br><samp>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CDATA #REQUIRED</samp>
<br><samp>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;targetID&nbsp;CDATA #REQUIRED</samp>
<br><samp>&nbsp;&nbsp; &gt;</samp>
<ul>
<li><b>id</b> - a unique identifier used to reference this contribution</li><li><b>targetID</b> - the unique identifier of a context menu inside a view or editor part.</li></ul>
<p><samp>&nbsp;&nbsp; &lt;!ELEMENT action (selection* , enablement?)&gt;</samp>
<p>&nbsp;&nbsp; This element defines an action that the user can invoke in the UI.</p>
<p></p>
<samp>&nbsp;&nbsp; &lt;!ATTLIST action</samp>
<br><samp>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CDATA #REQUIRED</samp>
<br><samp>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;label&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CDATA #REQUIRED</samp>
<br><samp>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;menubarPath&nbsp;&nbsp;&nbsp;CDATA #IMPLIED</samp>
<br><samp>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;icon&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CDATA #IMPLIED</samp>
<br><samp>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;helpContextId&nbsp;CDATA #IMPLIED</samp>
<br><samp>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;style&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(push|radio|toggle) #IMPLIED</samp>
<br><samp>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;state&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(true | false) "false"#IMPLIED</samp>
<br><samp>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;class&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CDATA #REQUIRED</samp>
<br><samp>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;enablesFor&nbsp;&nbsp;&nbsp;&nbsp;CDATA #IMPLIED</samp>
<br><samp>&nbsp;&nbsp; &gt;</samp>
<ul>
<li><b>id</b> - a unique identifier used as a reference for this action.</li><li><b>label</b> - a translatable name used as the menu item text. The name can include mnenomic information.</li><li><b>menubarPath</b> - a slash-delimited path ('/') used to specify the location of this action in the context menu. Each token in the path, except the last one, must represent a valid identifier of an existing menu in the hierarchy. The last token represents the named group into which this action will be added. If the path is omitted, this action will be added to the standard additions group defined by <samp>IWorkbenchActionConstants.MB_ADDITIONS</samp>.</li><li><b>icon</b> - a relative path of an icon used to visually represent the action in its context.
The path is relative to the location of the plugin.xml file of the contributing plug-in.</li><li><b>helpContextId</b> - a unique identifier indicating the help context for this action. If the action appears as a menu item, then pressing F1 while the menu item is highlighted will display help.</li><li><b>style</b> - an optional attribute to define the user interface style type for the action. If defined, the attribute value will be one of the following:
    <table border="0" width="80%">
      <tr>
 <td valign="top" width="25"></td>
        <td valign="top" nowrap><b>push</b></td>
        <td valign="top">- as a regular menu item or tool item.</td>
      </tr>
      <tr>
 <td valign="top" width="25"></td>
        <td valign="top" nowrap><b>radio</b></td>
        <td valign="top">- as a radio style menu item or tool item. Actions with the radio style within the same menu or toolbar group behave as a radio set. The initial value is specified by the <samp>state</samp> attribute.</td>
      </tr>
      <tr>
 <td valign="top" width="25"></td>
        <td valign="top" nowrap><b>toggle</b></td>
        <td valign="top">- as a checked style menu item or as a toggle tool item. The initial value is specified by the <samp>state</samp> attribute.</td>
      </tr>
    </table></li><li><b>state</b> - an optional attribute indicating the initial state (either <samp>true</samp> or <samp>false</samp>), used when the <samp>style</samp> attribute has the value <samp>radio</samp> or <samp>toggle</samp>.</li><li><b>class</b> - a name of the fully qualified class that implements <samp>org.eclipse.ui.IObjectActionDelegate</samp> (for object contributions), <samp>org.eclipse.ui.IViewActionDelegate</samp> (for viewer contributions to a view part), or <samp>org.eclipse.ui.IEditorActionDelegate</samp> (for viewer contributions to an editor part).  For backwards compatibility, <samp>org.eclipse.ui.IActionDelegate</samp> may be implemented for object contributions.</li><li><b>enablesFor</b> - a value indicating the selection count which must be met to enable the action.
If this attribute is specified and the condition is met, the action is enabled.
If the condition is not met, the action is disabled.
If no attribute is specified, the action is enabled for any number of items selected.
The following attribute formats are supported: 
    <table border="0" width="80%">
      <tr>
 <td valign="top" width="25"></td>
        <td valign="top" nowrap><b>!</b></td>
        <td valign="top">- 0 items selected</td>
      </tr>
      <tr>
 <td valign="top" width="25"></td>
        <td valign="top" nowrap><b>?</b></td>
        <td valign="top">- 0 or 1 items selected</td>
      </tr>
      <tr>
 <td valign="top" width="25"></td>
        <td valign="top" nowrap><b>+</b></td>
        <td valign="top">- 1 or more items selected</td>
      </tr>
      <tr>
 <td valign="top" width="25"></td>
        <td valign="top" nowrap><b>multiple, 2+</b></td>
        <td valign="top">- 2 or more items selected</td>
      </tr>
      <tr>
 <td valign="top" width="25"></td>
        <td valign="top" nowrap><b>n</b></td>
        <td valign="top">- a precise number of items selected.a precise number of items selected.&nbsp;
          For example: enablesFor=&quot; 4&quot; enables the action only when 4
          items are selected</td>
      </tr>
      <tr>
 <td valign="top" width="25"></td>
        <td valign="top" nowrap><b>*</b></td>
        <td valign="top">- any number of items selected</td>
      </tr>
    </table>
<p>
The enablement criteria for an action extension are initially defined 
by <samp>enablesFor</samp>, <samp>selection</samp> and <samp>enablement</samp>.  However, once the action
delegate has been instantiated it may control the action enable state directly 
within its <samp>selectionChanged</samp> method.</li></ul>
<p><samp>&nbsp;&nbsp; &lt;!ELEMENT filter EMPTY&gt;</samp>
<p>&nbsp;&nbsp; This element is used to evaluate the attribute state of each object in the current selection. A match only if each object in the selection has the specified attribute state. Each object in the selection must implement, or adapt to,</p>
<p></p>
<samp>&nbsp;&nbsp; &lt;!ATTLIST filter</samp>
<br><samp>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name&nbsp;&nbsp;CDATA #REQUIRED</samp>
<br><samp>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value&nbsp;CDATA #REQUIRED</samp>
<br><samp>&nbsp;&nbsp; &gt;</samp>
<ul>
<li><b>name</b> - the name of an object's attribute. Acceptable names reflect the object type, and should be publicly declared by the plug-in where the object type is declared.</li><li><b>value</b> - the required value of the object's attribute. The acceptable values for the object's attribute should be publicly declared.</li></ul>
<p><samp>&nbsp;&nbsp; &lt;!ELEMENT menu (separator+ , groupMarker*)&gt;</samp>
<p>&nbsp;&nbsp; This element is used to defined a new menu.</p>
<p></p>
<samp>&nbsp;&nbsp; &lt;!ATTLIST menu</samp>
<br><samp>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id&nbsp;&nbsp;&nbsp;&nbsp;CDATA #REQUIRED</samp>
<br><samp>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;label&nbsp;CDATA #REQUIRED</samp>
<br><samp>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;path&nbsp;&nbsp;CDATA #IMPLIED</samp>
<br><samp>&nbsp;&nbsp; &gt;</samp>
<ul>
<li><b>id</b> - a unique identifier that can be used to reference this menu.</li><li><b>label</b> - a translatable name used by the Workbench for this new menu. The name should include mnemonic information.</li><li><b>path</b> - the location of the new menu starting from the root of the menu. Each token in the path must refer to an existing menu, except the last token which should represent a named group in the last menu in the path. If omitted, the new menu will be added to the <samp>additions</samp> named group of the menu.</li></ul>
<p><samp>&nbsp;&nbsp; &lt;!ELEMENT separator EMPTY&gt;</samp>
<p>&nbsp;&nbsp; This element is used to create a menu separator in the new menu.</p>
<p></p>
<samp>&nbsp;&nbsp; &lt;!ATTLIST separator</samp>
<br><samp>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name&nbsp;CDATA #REQUIRED</samp>
<br><samp>&nbsp;&nbsp; &gt;</samp>
<ul>
<li><b>name</b> - the name of the menu separator. This name can later be referenced as the last token in a menu path. Therefore, a separator also serve as named group into which actions and menus can be added.</li></ul>
<p><samp>&nbsp;&nbsp; &lt;!ELEMENT groupMarker EMPTY&gt;</samp>
<p>&nbsp;&nbsp; This element is used to create a named group in the new menu. It has no visual representation in the new menu, unlike the</p>
<p></p>
<samp>&nbsp;&nbsp; &lt;!ATTLIST groupMarker</samp>
<br><samp>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name&nbsp;CDATA #REQUIRED</samp>
<br><samp>&nbsp;&nbsp; &gt;</samp>
<ul>
<li><b>name</b> - the name of the group marker. This name can later be referenced as the last token in the menu path. It serves as named group into which actions and menus can be added.</li></ul>
<p><samp>&nbsp;&nbsp; &lt;!ELEMENT selection EMPTY&gt;</samp>
<p>&nbsp;&nbsp; This element is used to help determine the action enablement based on the current selection. Ignored if the</p>
<p></p>
<samp>&nbsp;&nbsp; &lt;!ATTLIST selection</samp>
<br><samp>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;class&nbsp;CDATA #REQUIRED</samp>
<br><samp>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name&nbsp;&nbsp;CDATA #IMPLIED</samp>
<br><samp>&nbsp;&nbsp; &gt;</samp>
<ul>
<li><b>class</b> - a fully qualified name of the class or interface that each object in the selection must implement in order to enable the action.</li><li><b>name</b> - an optional wild card filter for the name that can be applied to all objects in the selection. If specified and the match fails, the action will be disabled.</li></ul>
<p><samp>&nbsp;&nbsp; &lt;!ELEMENT enablement (and | or | not | objectClass | objectState | pluginState | systemProperty)&gt;</samp>
<p>&nbsp;&nbsp; This element is used to define the enablement for the action.</p>
<p><samp>&nbsp;&nbsp; &lt;!ELEMENT visibility (and | or | not | objectClass | objectState | pluginState | systemProperty)&gt;</samp>
<p>&nbsp;&nbsp; This element is used to define the visibility for the action.</p>
<p><samp>&nbsp;&nbsp; &lt;!ELEMENT and (and | or | not | objectClass | objectState | pluginState | systemProperty)&gt;</samp>
<p>&nbsp;&nbsp; This element represent a boolean AND operation on the result of evaluating it's two sub-element expressions.</p>
<p><samp>&nbsp;&nbsp; &lt;!ELEMENT or (and | or | not | objectClass | objectState | pluginState | systemProperty)&gt;</samp>
<p>&nbsp;&nbsp; This element represent a boolean OR operation on the result of evaluating it's two sub-element expressions.</p>
<p><samp>&nbsp;&nbsp; &lt;!ELEMENT not (and | or | not | objectClass | objectState | pluginState | systemProperty)&gt;</samp>
<p>&nbsp;&nbsp; This element represent a boolean NOT operation on the result of evaluating it's sub-element expressions.</p>
<p><samp>&nbsp;&nbsp; &lt;!ELEMENT objectClass EMPTY&gt;</samp>
<p>&nbsp;&nbsp; This element is used to evaluate the class or interface of each object in the current selection. If each object in the selection implements the specified class or interface, the expression is evaluated as true.</p>
<p></p>
<samp>&nbsp;&nbsp; &lt;!ATTLIST objectClass</samp>
<br><samp>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name&nbsp;CDATA #REQUIRED</samp>
<br><samp>&nbsp;&nbsp; &gt;</samp>
<ul>
<li><b>name</b> - a fully qualified name of a class or interface.  The expression is evaluated as true only if all objects within the selection implement this class or interface.</li></ul>
<p><samp>&nbsp;&nbsp; &lt;!ELEMENT objectState EMPTY&gt;</samp>
<p>&nbsp;&nbsp; This element is used to evaluate the attribute state of each object in the current selection. If each object in the selection has the specified attribute state, the expression is evaluated as true. To evaluate this type of expression, each object in the selection must implement, or adapt to,</p>
<p></p>
<samp>&nbsp;&nbsp; &lt;!ATTLIST objectState</samp>
<br><samp>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name&nbsp;&nbsp;CDATA #REQUIRED</samp>
<br><samp>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value&nbsp;CDATA #REQUIRED</samp>
<br><samp>&nbsp;&nbsp; &gt;</samp>
<ul>
<li><b>name</b> - the name of an object's attribute. Acceptable names reflect the object type, and should be publicly declared by the plug-in where the object type is declared.</li><li><b>value</b> - the required value of the object's attribute. The acceptable values for the object's attribute should be publicly declared.</li></ul>
<p><samp>&nbsp;&nbsp; &lt;!ELEMENT pluginState EMPTY&gt;</samp>
<p>&nbsp;&nbsp; This element is used to evaluate the state of a plug-in. The state of the plug-in may be</p>
<p></p>
<samp>&nbsp;&nbsp; &lt;!ATTLIST pluginState</samp>
<br><samp>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id&nbsp;&nbsp;&nbsp;&nbsp;CDATA #REQUIRED</samp>
<br><samp>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value&nbsp;(installed|activated) "installed"</samp>
<br><samp>&nbsp;&nbsp; &gt;</samp>
<ul>
<li><b>id</b> - the identifier of a plug-in which may or may not exist in the plug-in registry.</li><li><b>value</b> - the required state of the plug-in. The state of the plug-in may be <samp>installed</samp> or <samp>activated</samp>.</li></ul>
<p><samp>&nbsp;&nbsp; &lt;!ELEMENT systemProperty EMPTY&gt;</samp>
<p>&nbsp;&nbsp; This element is used to evaluate the state of some system property.  The property value is retrieved from</p>
<p></p>
<samp>&nbsp;&nbsp; &lt;!ATTLIST systemProperty</samp>
<br><samp>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name&nbsp;&nbsp;CDATA #REQUIRED</samp>
<br><samp>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value&nbsp;CDATA #REQUIRED</samp>
<br><samp>&nbsp;&nbsp; &gt;</samp>
<ul>
<li><b>name</b> - the name of the system property.</li><li><b>value</b> - the required value of the system property.</li></ul>
<b><i>Examples: </i></b>The following is an example of a pop-up menu extension point: 
<p>
<pre>
   &lt;extension point=&quot;org.eclipse.ui.popupMenus&quot;&gt; 
      &lt;objectContribution 
         id=&quot;com.xyz.C1&quot; 
         objectClass=&quot;org.eclipse.core.resources.IFile&quot; 
         nameFilter=*.java&quot;&gt; 
         &lt;menu
            id=&quot;com.xyz.xyzMenu&quot; 
            path=&quot;additions&quot; 
            label=&quot;&amp;amp;XYZ Java Tools&quot;&gt; 
            &lt;separator name=&quot;group1&quot;/&gt; 
         &lt;/menu&gt; 
         &lt;action
            id=&quot;com.xyz.runXYZ&quot; 
            label=&quot;&amp;amp;Run XYZ Tool&quot;
            style=&quot;push&quot;
            menubarPath=&quot;com.xyz.xyzMenu/group1&quot; 
            icon=&quot;icons/runXYZ.gif&quot; 
            helpContextId=&quot;com.xyz.run_action_context&quot; 
            class=&quot;com.xyz.actions.XYZToolActionDelegate&quot; 
            enablesFor=&quot;1&quot;&gt; 
         &lt;/action&gt; 
      &lt;/objectContribution&gt; 
      &lt;viewerContribution 
         id=&quot;com.xyz.C2&quot; 
         targetID=&quot;org.eclipse.ui.views.TaskList&quot;&gt; 
         &lt;action
            id=&quot;com.xyz.showXYZ&quot; 
            label=&quot;&amp;amp;Show XYZ&quot;
            style=&quot;toggle&quot;
            state=&quot;true&quot;
            menubarPath=&quot;additions&quot; 
            icon=&quot;icons/showXYZ.gif&quot; 
            helpContextId=&quot;com.xyz.show_action_context&quot; 
            class=&quot;com.xyz.actions.XYZShowActionDelegate&quot;&gt; 
         &lt;/action&gt; 
      &lt;/viewerContribution&gt; 
   &lt;/extension&gt; 
</pre>
</p>
In the example above, the specified object contribution action will only enable for a single selection (<samp>enablesFor</samp> attribute). In addition, each object in the selection must implement the specified interface (<samp>IFile</samp>) and must be a Java file. This action will be added into a submenu previously created. This contribution 
will be effective in any view that has the required selection. 
<p>
In contrast, the viewer contribution above will only appear in the Tasks view context menu, and will not be affected by the selection in the view. 
<p>
The following is an example of the filter mechanism. In this case the action will only appear for IMarkers which are completed and have high priority. 
<p>
<pre>
   &lt;extension point=&quot;org.eclipse.ui.popupMenus&quot;&gt; 
      &lt;objectContribution 
         id=&quot;com.xyz.C3&quot; 
         objectClass=&quot;org.eclipse.core.resources.IMarker&quot;&gt; 
         &lt;filter name=&quot;done&quot; value=&quot;true&quot;/&gt; 
         &lt;filter name=&quot;priority&quot; value=&quot;2&quot;/&gt; 
         &lt;action
            id=&quot;com.xyz.runXYZ&quot; 
            label=&quot;High Priority Completed Action Tool&quot; 
            icon=&quot;icons/runXYZ.gif&quot; 
            class=&quot;com.xyz.actions.MarkerActionDelegate&quot;&gt; 
         &lt;/action&gt; 
      &lt;/objectContribution&gt; 
   &lt;/extension&gt; 
</pre>
</p>
The following is an other example of using the visibility element: 
<p>
<pre>
   &lt;extension point=&quot;org.eclipse.ui.popupMenus&quot;&gt; 
      &lt;viewerContribution 
         id=&quot;com.xyz.C4&quot; 
         targetID=&quot;org.eclipse.ui.views.TaskList&quot;&gt;
         &lt;visibility&gt;
            &lt;and&gt;
               &lt;pluginState id=&quot;com.xyz&quot; value=&quot;activated&quot;/&gt;
               &lt;systemProperty name=&quot;ADVANCED_MODE&quot; value=&quot;true&quot;/&gt;
            &lt;/and&gt;
         &lt;/visibility&gt;
         &lt;action
            id=&quot;com.xyz.showXYZ&quot; 
            label=&quot;&amp;amp;Show XYZ&quot;
            style=&quot;push&quot;
            menubarPath=&quot;additions&quot; 
            icon=&quot;icons/showXYZ.gif&quot; 
            helpContextId=&quot;com.xyz.show_action_context&quot; 
            class=&quot;com.xyz.actions.XYZShowActionDelegate&quot;&gt; 
         &lt;/action&gt; 
      &lt;/viewerContribution&gt; 
   &lt;/extension&gt; 
</pre>
</p>
<p>
In the example above, the specified action will appear as a menu item in the Task view context menu, but only if the "com.xyz" plug-in is active and the specified system property is set to true.<p>
<b><i>API Information: </i></b>The value of the action attribute <samp>class</samp>
must be a fully qualified class name of a Java class 
that implements <samp>org.eclipse.ui.IObjectActionDelegate</samp>
in the case of object contributions, 
<samp>org.eclipse.ui.IViewActionDelegate</samp>
for contributions to context menus that belong to views, 
or <samp>org.eclipse.ui.IEditorActionDelegate</samp>
for contributions to context menus that belong to editors.  
In all cases, the implementing class is loaded as late 
as possible to avoid loading the entire plug-in before 
it is really needed. 
<p>
Note: For backwards compatibility, 
<samp>org.eclipse.ui.IActionDelegate</samp> may be 
implemented for object contributions. 
<p>
Conext menu extension within a part is only possible 
when the target part publishes a menu for extension.  
This is strongly encouraged, as it improves the 
extensibility of the product. To accomplish this 
each part should publish any context menus which are 
defined by calling 
<samp>IWorkbenchPartSite.registerContextMenu</samp>.  
Once this has been done the workbench will 
automatically insert any action extensions which exist. 
<p>
A menu id must be provided for each registered menu.  
For consistency across parts the following strategy 
should be adopted by all part implementors. 
<p>
<ul>
<li>
If the target part has only one context menu it 
should be registered with id == part id.  This can be 
done easily by calling 
<samp>registerContextMenu(MenuManager, ISelectionProvider)</samp>.  
Extenders may use the part id itself as the targetID for 
the action extension. </li>
<li>
If the target part has more than one context menu a 
unique id should be defined for each.  Prefix each id 
with the part id and publish these id's within 
the javadoc for the target part.  Register each 
menu at runtime by calling 
<samp>registerContextMenu(String, MenuManager, ISelectionProvider)</samp>. 
Extenders will use the unique menu id as the targetID 
for the action extension. </li></ul>
<p>
Any context menu which is registered with the workbench 
also should contain a standard insertion point with id 
<samp>IWorkbenchActionConstants.MB_ADDITIONS</samp>.  
Other plug-ins will use this value as a reference 
point for insertion.  The insertion point may be 
defined by adding a GroupMarker to the menu at an 
appropriate location for insertion. 
<p>
An object in the workbench which is the selection 
in a context menu may define an 
<samp>org.eclipse.ui.IActionFilter</samp>.  This is a 
filtering strategy which can perform type specific 
filtering.  The workbench will retrieve the filter 
for the selection by testing to see if it implements 
<samp>IActionFilter</samp>.  If that fails, the 
workbench will ask for a filter through the 
<samp>IAdaptable</samp> mechanism.
<p>
Action and menu labels may contain special characters that encode mnemonics which are specified using the ampersand ('&amp;') character in front of a selected character in the translated text. Since ampersand is not allowed in XML strings, use <samp>&amp;amp;</samp> character entity. 
<p>
If two or more actions are contributed to a menu by a single extension the actions will appear in the reverse order of how they are listed in the plugin.xml file. This behavior is admittedly unintuitive.  However, it was discovered after the  Eclipse Platform API was frozen.  Changing the behavior now would break every plug-in which relies upon the existing behavior.
<p>
The <samp>selection</samp> and <samp>enablement</samp> elements are mutually exclusive. The <samp>enablement</samp> element can replace the <samp>selection</samp> element using the sub-elements <samp>objectClass</samp> and <samp>objectState</samp>. For example, the following:
<pre>
 &lt;selection
  class=&quot;org.eclipse.core.resources.IFile&quot;
  name=&quot;*.java&quot;&gt;
 &lt;/selection&gt;
</pre>
can be expressed using:
<pre>
 &lt;enablement&gt;
  &lt;and&gt;
   &lt;objectClass name=&quot;org.eclipse.core.resources.IFile&quot;/&gt;
   &lt;objectState name=&quot;extension&quot; value=&quot;java&quot;/&gt;
  &lt;/and&gt;
 &lt;/enablement&gt;
</pre><p>
<b><i>Supplied Implementation: </i></b>The workbench views have built-in context menus 
that already come loaded with a number of actions. 
Plug-ins can contribute to these menus. If a viewer 
has reserved slots for these contributions and they 
are made public, slot names can be used as paths. 
Otherwise, actions and submenus will be added at 
the end of the pop-up menu.<p>
Copyright (c) 2000, 2003 IBM Corporation and others.
All rights reserved.   This program and the accompanying materials are made available under the terms of the Common Public License v1.0 which accompanies this distribution, and is available at http://www.eclipse.org/legal/cpl-v10.html<p>
</BODY>
</HTML>
